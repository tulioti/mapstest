<h1>Mapa simples</h1>
<p>Utilizando marcadores</p>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>


<h2>Footer</h2>
<% @lat = -19.916681 %>
<% @lat2 = -19.7 %>
<% @lat3 = -19.8 %>
<% @log = -43.934493 %>

<script source="javascript">

  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  handler.fitMapToBounds();
});

    var start_point = [ <%= @lat %>, <%= @log %>];
    var end_point   = [ <%= @lat2 %>, <%= @log %>];


  function drawRoutes(start_point, end_point){

    var directionsService = new google.maps.DirectionsService();
    //var directionsDisplay = new google.maps.DirectionsRenderer();
    var directionsDisplay = new google.maps.DirectionsRenderer({
    polylineOptions: {
       strokeColor: "red"
    }
    });

    directionsDisplay.setMap(handler.getMap());
    start = new google.maps.LatLng(start_point[0], start_point[1]);
    end = new google.maps.LatLng(end_point[0], end_point[1]);
    var request = {
      origin:      new google.maps.LatLng(start_point[0], start_point[1]),
      destination: new google.maps.LatLng(end_point[0], end_point[1]),
      travelMode:  google.maps.TravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
      if (status === google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
  drawRoutes(start_point, end_point);

  start_point = [ <%= @lat2 %>, <%= @log %>];
  end_point   = [ <%= @lat3 %>, <%= @log %>];
  drawRoutes(start_point, end_point);

/*

    var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'map'}}, function(){







  });













  /*




    var handler = Gmaps.build('Google');
  handler.buildMap({ internal: {id: 'map'}}, function(){

    var start_point = [ <%= @lat %>, <%= @log %>];
    var end_point   = [ <%= @lat2 %>, <%= @log %>];

    var directionsService = new google.maps.DirectionsService();
    var directionsDisplay = new google.maps.DirectionsRenderer();

    directionsDisplay.setMap(handler.getMap());


    var request = {
      origin:      new google.maps.LatLng(start_point[0], start_point[1]),
      destination: new google.maps.LatLng(end_point[0], end_point[1]),
      travelMode:  google.maps.TravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
      if (status === google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  });


*/
</script>
